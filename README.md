# Obsidian ç¿»è¯‘è¾…åŠ©å·¥å…·

æœ¬é¡¹ç›®åŒ…å«ä¸€ç³»åˆ— Python è„šæœ¬ï¼Œæ—¨åœ¨ç®€åŒ–ä¸º [Obsidian](https://obsidian.md/) è¿›è¡Œä¸­æ–‡ç¿»è¯‘çš„æµç¨‹ã€‚è¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨ï¼š

-   åˆ†æå½“å‰ç¿»è¯‘è¿›åº¦ã€‚
-   è¯†åˆ«æœªç¿»è¯‘å’Œå¯èƒ½å·²ç¿»è¯‘çš„æ–‡æœ¬ã€‚
-   åˆ©ç”¨ç°æœ‰ç¿»è¯‘æˆæœï¼Œè‡ªåŠ¨å¡«å……å»ºè®®ã€‚
-   åˆå¹¶ç¿»è¯‘å†…å®¹ã€‚
-   è‡ªåŠ¨ç”Ÿæˆè§„èŒƒçš„ Pull Request å’Œ Git Commit ä¿¡æ¯ã€‚

ç›®æ ‡ä»“åº“ï¼š[obsidianmd/obsidian-translations](https://github.com/obsidianmd/obsidian-translations)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

-   **å…¨é¢çš„ç¿»è¯‘çŠ¶æ€åˆ†æ**ï¼šç²¾ç¡®ç»Ÿè®¡å·²ç¿»è¯‘ã€æœªç¿»è¯‘ã€ä¸åŸæ–‡ç›¸åŒçš„æ¡ç›®ã€‚
-   **æ™ºèƒ½ç¿»è¯‘å»ºè®®**ï¼šåˆ©ç”¨å·²æœ‰çš„ç¿»è¯‘å†…å®¹ï¼Œä¸ºæ–°å‡ºç°çš„ç›¸åŒè‹±æ–‡æ–‡æœ¬æä¾›ç¿»è¯‘å»ºè®®ï¼Œæé«˜æ•ˆç‡å’Œä¸€è‡´æ€§ã€‚
-   **æ¸…æ™°çš„äº§å‡ºç‰©**ï¼šç”Ÿæˆå¤šä¸ª JSON æ–‡ä»¶ï¼Œåˆ†åˆ«åŒ…å«çº¯æœªç¿»è¯‘ã€å¯èƒ½å·²ç¿»è¯‘å’Œå®Œæ•´çš„åˆ†ææŠ¥å‘Šã€‚
-   **è‡ªåŠ¨åŒ–åˆå¹¶**ï¼šå°†ç¿»è¯‘å¥½çš„å†…å®¹å®‰å…¨åœ°åˆå¹¶å› `zh.json` æ–‡ä»¶ç»“æ„ä¸­ã€‚
-   **ä¸€é”®ç”Ÿæˆæäº¤ä¿¡æ¯**ï¼šæ ¹æ®ç¿»è¯‘å˜æ›´ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆç¤¾åŒºè§„èŒƒçš„ PR æ ‡é¢˜ã€æ­£æ–‡å’Œ Git Commit ä¿¡æ¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡å·¥ä½œ

1.  **å…‹éš†ä»“åº“**ï¼šå°†æ­¤å·¥å…·ä»“åº“å…‹éš†åˆ°æœ¬åœ°ã€‚
2.  **å®‰è£…ä¾èµ–**ï¼šæœ¬é¡¹ç›®æ— ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä½¿ç”¨æ ‡å‡† Python å³å¯ã€‚
3.  **å‡†å¤‡ç¿»è¯‘æ–‡ä»¶**ï¼š
    -   ä» [obsidian-translations](https://github.com/obsidianmd/obsidian-translations) ä»“åº“è·å–æœ€æ–°çš„ `en.json` å’Œ `zh.json` æ–‡ä»¶ã€‚
    -   å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾ç½®äºè„šæœ¬æ‰€åœ¨çš„æ ¹ç›®å½•ã€‚

### 2. åˆ†æç¿»è¯‘çŠ¶æ€

è¿è¡Œåˆ†æè„šæœ¬ï¼Œäº†è§£å½“å‰çš„ç¿»è¯‘æƒ…å†µã€‚

```bash
python translate.py
```

è¯¥è„šæœ¬ä¼šï¼š
1.  æ¯”è¾ƒ `en.json` å’Œ `zh.json`ã€‚
2.  åœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„ç»Ÿè®¡æ‘˜è¦ã€‚
3.  ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
    -   `translation_report.json`ï¼šå®Œæ•´çš„åˆ†ææŠ¥å‘Šã€‚
    -   `untranslated_entries.json`ï¼š**çœŸæ­£æœªç¿»è¯‘**çš„æ¡ç›®ï¼Œæ ¼å¼ä¸º `{"è·¯å¾„": "è‹±æ–‡åŸæ–‡"}`ã€‚
    -   `potentially_translated_entries.json`ï¼š**å¯èƒ½å·²ç¿»è¯‘**çš„æ¡ç›®ï¼ŒåŒ…å«ç¿»è¯‘å»ºè®®ã€‚

### 3. è¿›è¡Œç¿»è¯‘

1.  **åˆ›å»ºç¿»è¯‘æ–‡ä»¶**ï¼šå¤åˆ¶ `untranslated_entries.json` å¹¶é‡å‘½åä¸º `translated_entries.json`ã€‚
2.  **ç¿»è¯‘å†…å®¹**ï¼šæ‰“å¼€ `translated_entries.json`ï¼Œå°†æ–‡ä»¶ä¸­çš„è‹±æ–‡å€¼ï¼ˆvalueï¼‰æ›¿æ¢ä¸ºä¸­æ–‡ç¿»è¯‘ã€‚

    **ç¤ºä¾‹**ï¼š
    *   ç¿»è¯‘å‰ (`untranslated_entries.json`):
        ```json
        {
          "command.go-to-next-tab.name": "Go to next tab"
        }
        ```
    *   ç¿»è¯‘å (`translated_entries.json`):
        ```json
        {
          "command.go-to-next-tab.name": "åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ"
        }
        ```
3.  **(å¯é€‰) å‚è€ƒå»ºè®®**ï¼šæ‰“å¼€ `potentially_translated_entries.json` æŸ¥çœ‹å¹¶åˆ©ç”¨å…¶ä¸­çš„ç¿»è¯‘å»ºè®®ï¼Œæ‰‹åŠ¨å°†å®ƒä»¬æ·»åŠ åˆ° `translated_entries.json` ä¸­ã€‚

### 4. åˆå¹¶ç¿»è¯‘

å½“ `translated_entries.json` æ–‡ä»¶å‡†å¤‡å¥½åï¼Œè¿è¡Œåˆå¹¶è„šæœ¬ã€‚

```bash
python pre.py
```

æ­¤è„šæœ¬ä¼šï¼š
1.  è¯»å– `zh.json` (åŸå§‹ä¸­æ–‡æ–‡ä»¶) å’Œ `translated_entries.json` (ä½ çš„ç¿»è¯‘)ã€‚
2.  å°†ä½ çš„ç¿»è¯‘åˆå¹¶åˆ°åŸå§‹æ•°æ®ä¸­ã€‚
3.  ç”Ÿæˆæœ€ç»ˆçš„ç¿»è¯‘æ–‡ä»¶ `zh_translated.json`ã€‚

### 5. ç”Ÿæˆ PR å’Œ Commit ä¿¡æ¯

æœ€åï¼Œä½¿ç”¨ `zh_translated.json` å’ŒåŸå§‹çš„ `zh.json` æ¥ç”Ÿæˆæäº¤ä¿¡æ¯ã€‚

```bash
python generate_pr_message.py
```

è¯¥è„šæœ¬ä¼šï¼š
1.  æ¯”è¾ƒ `zh.json` å’Œ `zh_translated.json` ä¹‹é—´çš„å·®å¼‚ã€‚
2.  ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
    -   `pr_message.md`ï¼šåŒ…å«æ ¼å¼åŒ–å¥½çš„ PR æ ‡é¢˜å’Œæ­£æ–‡ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ° GitHubã€‚
    -   `commit_info.txt`ï¼šåŒ…å«å®Œæ•´çš„ Git Commit ä¿¡æ¯å’Œå¯ç›´æ¥æ‰§è¡Œçš„ Git å‘½ä»¤ã€‚
    -   `translation_changes.json`ï¼šæœ¬æ¬¡å˜æ›´çš„è¯¦ç»† JSON æŠ¥å‘Šã€‚

### 6. æäº¤ç¿»è¯‘

1.  **æ›¿æ¢æ–‡ä»¶**ï¼šå°†ç”Ÿæˆçš„ `zh_translated.json` é‡å‘½åä¸º `zh.json`ï¼Œæ›¿æ¢æ‰ä½ æœ¬åœ° `obsidian-translations` ä»“åº“ä¸­çš„æ—§æ–‡ä»¶ã€‚
2.  **æäº¤ä»£ç **ï¼šä½¿ç”¨ `commit_info.txt` ä¸­ç”Ÿæˆçš„å‘½ä»¤æ¥æäº¤ä½ çš„æ›´æ”¹ã€‚
3.  **åˆ›å»º PR**ï¼šåœ¨ GitHub ä¸Šåˆ›å»º Pull Requestï¼Œå¹¶å°† `pr_message.md` çš„å†…å®¹ç²˜è´´è¿›å»ã€‚

## è„šæœ¬è¯¦è§£

### `translate.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼šåˆ†æå’ŒæŠ¥å‘Šã€‚
-   **è¾“å…¥**ï¼š`en.json`, `zh.json`
-   **è¾“å‡º**ï¼š
    -   `translation_report.json`
    -   `untranslated_entries.json`
    -   `potentially_translated_entries.json`
-   **ç”¨é€”**ï¼šç¿»è¯‘å·¥ä½œçš„ç¬¬ä¸€æ­¥ï¼Œç”¨äºè¯„ä¼°å·¥ä½œé‡å’Œè·å–å¾…ç¿»è¯‘åˆ—è¡¨ã€‚

### `pre.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼šåˆå¹¶ç¿»è¯‘ã€‚
-   **è¾“å…¥**ï¼š`zh.json`, `translated_entries.json`
-   **è¾“å‡º**ï¼š`zh_translated.json`
-   **ç”¨é€”**ï¼šå°†åˆ†æ•£çš„ç¿»è¯‘æ¡ç›®æ•´åˆå›å®Œæ•´çš„ JSON æ–‡ä»¶ç»“æ„ä¸­ã€‚

### `generate_pr_message.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼šç”Ÿæˆ PR å’Œ Commit ä¿¡æ¯ã€‚
-   **è¾“å…¥**ï¼š`zh.json` (æ—§), `zh_translated.json` (æ–°), `en.json` (å¯é€‰å‚è€ƒ)
-   **è¾“å‡º**ï¼š
    -   `pr_message.md`
    -   `commit_info.txt`
    -   `translation_changes.json`
-   **ç”¨é€”**ï¼šè‡ªåŠ¨åŒ–åˆ›å»ºé«˜è´¨é‡ã€è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼ŒèŠ‚çœæ—¶é—´å¹¶ç¬¦åˆç¤¾åŒºè´¡çŒ®æ ‡å‡†ã€‚

## è´¡çŒ®

æ¬¢è¿é€šè¿‡ Issue æˆ– Pull Request æå‡ºæ”¹è¿›å»ºè®®ï¼Œè®©è¿™ä¸ªå·¥å…·å˜å¾—æ›´å¥½ç”¨ï¼
