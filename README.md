# Obsidian Translation Helper (Obsidian ç¿»è¯‘è¾…åŠ©å·¥å…·)

æœ¬é¡¹ç›®åŒ…å«ä¸€ç³»åˆ— Python è„šæœ¬ï¼Œæ—¨åœ¨ç®€åŒ–ä¸º [Obsidian](https://obsidian.md/) è¿›è¡Œä¸­æ–‡ç¿»è¯‘çš„æµç¨‹ã€‚è¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨ï¼š

-   åˆ†æå½“å‰ç¿»è¯‘è¿›åº¦ã€‚
-   è¯†åˆ«æœªç¿»è¯‘å’Œå¯èƒ½å·²ç¿»è¯‘çš„æ–‡æœ¬ã€‚
-   åˆ©ç”¨ç°æœ‰ç¿»è¯‘æˆæœï¼Œè‡ªåŠ¨å¡«å……å»ºè®®ã€‚
-   åˆå¹¶ç¿»è¯‘å†…å®¹ã€‚
-   è‡ªåŠ¨ç”Ÿæˆè§„èŒƒçš„ Pull Request å’Œ Git Commit ä¿¡æ¯ã€‚

ç›®æ ‡ä»“åº“ï¼š[obsidianmd/obsidian-translations](https://github.com/obsidianmd/obsidian-translations)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

-   **å…¨é¢çš„ç¿»è¯‘çŠ¶æ€åˆ†æ**ï¼šç²¾ç¡®ç»Ÿè®¡å·²ç¿»è¯‘ã€æœªç¿»è¯‘ã€ä¸åŸæ–‡ç›¸åŒçš„æ¡ç›®ã€‚
-   **æ™ºèƒ½ç¿»è¯‘å»ºè®®**ï¼šåˆ©ç”¨å·²æœ‰çš„ç¿»è¯‘å†…å®¹ï¼Œä¸ºæ–°å‡ºç°çš„ç›¸åŒè‹±æ–‡æ–‡æœ¬æä¾›ç¿»è¯‘å»ºè®®ï¼Œæé«˜æ•ˆç‡å’Œä¸€è‡´æ€§ã€‚
-   **æ¸…æ™°çš„äº§å‡ºç‰©**ï¼šç”Ÿæˆå¤šä¸ª JSON æ–‡ä»¶ï¼Œåˆ†åˆ«åŒ…å«çº¯æœªç¿»è¯‘ã€å¯èƒ½å·²ç¿»è¯‘å’Œå®Œæ•´çš„åˆ†ææŠ¥å‘Šã€‚
-   **è‡ªåŠ¨åŒ–åˆå¹¶**ï¼šå°†ç¿»è¯‘å¥½çš„å†…å®¹å®‰å…¨åœ°åˆå¹¶å› `zh.json` æ–‡ä»¶ç»“æ„ä¸­ã€‚
-   **ä¸€é”®ç”Ÿæˆæäº¤ä¿¡æ¯**ï¼šæ ¹æ®ç¿»è¯‘å˜æ›´ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆç¤¾åŒºè§„èŒƒçš„ PR æ ‡é¢˜ã€æ­£æ–‡å’Œ Git Commit ä¿¡æ¯ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡å·¥ä½œ

1.  **å…‹éš†ä»“åº“**ï¼šå°†æ­¤å·¥å…·ä»“åº“å…‹éš†åˆ°æœ¬åœ°ã€‚
2.  **å®‰è£…ä¾èµ–**ï¼šæœ¬é¡¹ç›®æ— ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œä½¿ç”¨æ ‡å‡† Python å³å¯ã€‚
3.  **å‡†å¤‡ç¿»è¯‘æ–‡ä»¶**ï¼š
    -   åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `input` æ–‡ä»¶å¤¹ã€‚
    -   ä» [obsidian-translations](https://github.com/obsidianmd/obsidian-translations) ä»“åº“è·å–æœ€æ–°çš„ `en.json` å’Œ `zh.json` æ–‡ä»¶ã€‚
    -   å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾ç½®äº `input` ç›®å½•ä¸­ã€‚

### 2. åˆ†æç¿»è¯‘çŠ¶æ€

è¿è¡Œ `analyze_translations.py` è„šæœ¬ï¼Œå…¨é¢äº†è§£å½“å‰çš„ç¿»è¯‘æƒ…å†µã€‚è¿™æ˜¯æ¨èçš„å¼€å§‹æ–¹å¼ã€‚

```bash
python analyze_translations.py
```

è¯¥è„šæœ¬ä¼šï¼š
1.  æ¯”è¾ƒ `input/en.json` å’Œ `input/zh.json`ã€‚
2.  åœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„ç»Ÿè®¡æ‘˜è¦ã€‚
3.  åœ¨ `output_analyze` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
    -   `translation_report.json`ï¼šå®Œæ•´çš„åˆ†ææŠ¥å‘Šã€‚
    -   `untranslated_entries.json`ï¼šæ‰€æœ‰æœªç¿»è¯‘ï¼ˆæˆ–ä¸è‹±æ–‡åŸæ–‡ç›¸åŒï¼‰çš„æ¡ç›®ï¼Œæ ¼å¼ä¸º `{"è·¯å¾„": "è‹±æ–‡åŸæ–‡"}`ã€‚**è¿™æ˜¯æ‚¨éœ€è¦ç¿»è¯‘çš„ä¸»è¦æ–‡ä»¶**ã€‚
    -   `potentially_translated_entries.json`ï¼š**å¯èƒ½å·²ç¿»è¯‘**çš„æ¡ç›®ï¼ŒåŒ…å«ç¿»è¯‘å»ºè®®ï¼Œå¯ä½œä¸ºç¿»è¯‘æ—¶çš„å‚è€ƒã€‚

### 3. è¿›è¡Œç¿»è¯‘

1.  **åˆ›å»ºç¿»è¯‘æ–‡ä»¶**ï¼šå°† `output_analyze/untranslated_entries.json` æ–‡ä»¶å¤åˆ¶åˆ° `input` ç›®å½•ï¼Œå¹¶é‡å‘½åä¸º `manual_translations.json`ã€‚è¿™æ˜¯æ‚¨çš„å·¥ä½œæ–‡ä»¶ã€‚
2.  **ç¿»è¯‘å†…å®¹**ï¼šæ‰“å¼€ `input/manual_translations.json`ï¼Œå°†æ–‡ä»¶ä¸­çš„è‹±æ–‡å€¼ï¼ˆvalueï¼‰æ›¿æ¢ä¸ºä¸­æ–‡ç¿»è¯‘ã€‚
    -   **ç¤ºä¾‹**ï¼š
        *   ç¿»è¯‘å‰ (`untranslated_entries.json`):
            ```json
            {
              "command.go-to-next-tab.name": "Go to next tab"
            }
            ```
        *   ç¿»è¯‘å (`manual_translations.json`):
            ```json
            {
              "command.go-to-next-tab.name": "åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªæ ‡ç­¾é¡µ"
            }
            ```
3.  **(å¯é€‰) å‚è€ƒå»ºè®®**ï¼šæ‰“å¼€ `output_analyze/potentially_translated_entries.json` æŸ¥çœ‹å¹¶åˆ©ç”¨å…¶ä¸­çš„ç¿»è¯‘å»ºè®®ã€‚å¦‚æœå»ºè®®åˆé€‚ï¼Œå¯ä»¥å°†å…¶å¤åˆ¶åˆ°æ‚¨çš„ `input/manual_translations.json` æ–‡ä»¶ä¸­ï¼Œä»¥ç¡®ä¿ç¿»è¯‘çš„ä¸€è‡´æ€§ã€‚
4.  **ä¿å­˜å·¥ä½œ**ï¼šå®Œæˆç¿»è¯‘åï¼Œè¯·ç¡®ä¿å·²ä¿å­˜ `input/manual_translations.json` æ–‡ä»¶ã€‚

### 4. åˆå¹¶ç¿»è¯‘

å½“ `input/manual_translations.json` æ–‡ä»¶å‡†å¤‡å¥½åï¼Œè¿è¡Œåˆå¹¶è„šæœ¬ `merge_translations.py`ã€‚

```bash
python merge_translations.py
```

æ­¤è„šæœ¬ä¼šï¼š
1.  è¯»å– `input/zh.json` (åŸå§‹ä¸­æ–‡æ–‡ä»¶) å’Œ `input/manual_translations.json` (ä½ çš„ç¿»è¯‘)ã€‚
2.  å°†ä½ çš„ç¿»è¯‘åˆå¹¶åˆ°åŸå§‹æ•°æ®ä¸­ã€‚
3.  åœ¨ `output` ç›®å½•ä¸‹ç”Ÿæˆæœ€ç»ˆçš„ç¿»è¯‘æ–‡ä»¶ `zh_translated.json`ã€‚

### 5. ç”Ÿæˆ PR å’Œ Commit ä¿¡æ¯

æœ€åï¼Œä½¿ç”¨ `output/zh_translated.json` å’ŒåŸå§‹çš„ `input/zh.json` æ¥ç”Ÿæˆæäº¤ä¿¡æ¯ã€‚

```bash
python generate_pr_message.py
```

è¯¥è„šæœ¬ä¼šï¼š
1.  æ¯”è¾ƒ `input/zh.json` å’Œ `output/zh_translated.json` ä¹‹é—´çš„å·®å¼‚ã€‚
2.  åœ¨ `output` ç›®å½•ä¸‹ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
    -   `pr_message.md`ï¼šåŒ…å«æ ¼å¼åŒ–å¥½çš„ PR æ ‡é¢˜å’Œæ­£æ–‡ï¼Œå¯ç›´æ¥å¤åˆ¶åˆ° GitHubã€‚
    -   `commit_info.txt`ï¼šåŒ…å«å®Œæ•´çš„ Git Commit ä¿¡æ¯å’Œå¯ç›´æ¥æ‰§è¡Œçš„ Git å‘½ä»¤ã€‚
    -   `translation_changes.json`ï¼šæœ¬æ¬¡å˜æ›´çš„è¯¦ç»† JSON æŠ¥å‘Šã€‚

### 6. æäº¤ç¿»è¯‘

1.  **æ›¿æ¢æ–‡ä»¶**ï¼šå°†ç”Ÿæˆçš„ `output/zh_translated.json` é‡å‘½åä¸º `zh.json`ï¼Œæ›¿æ¢æ‰ä½ æœ¬åœ° `obsidian-translations` ä»“åº“ä¸­çš„æ—§æ–‡ä»¶ã€‚
2.  **æäº¤ä»£ç **ï¼šä½¿ç”¨ `output/commit_info.txt` ä¸­ç”Ÿæˆçš„å‘½ä»¤æ¥æäº¤ä½ çš„æ›´æ”¹ã€‚
3.  **åˆ›å»º PR**ï¼šåœ¨ GitHub ä¸Šåˆ›å»º Pull Requestï¼Œå¹¶å°† `output/pr_message.md` çš„å†…å®¹ç²˜è´´è¿›å»ã€‚

## è„šæœ¬è¯¦è§£

### `analyze_translations.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼šåˆ†æå’ŒæŠ¥å‘Šã€‚
-   **è¾“å…¥**ï¼š`input/en.json`, `input/zh.json`
-   **è¾“å‡º** (`output_analyze/` ç›®å½•):
    -   `translation_report.json`
    -   `untranslated_entries.json`
    -   `potentially_translated_entries.json`
-   **ç”¨é€”**ï¼šç¿»è¯‘å·¥ä½œçš„ç¬¬ä¸€æ­¥ï¼Œç”¨äºè¯„ä¼°å·¥ä½œé‡ã€è·å–å¾…ç¿»è¯‘åˆ—è¡¨å’Œç¿»è¯‘å»ºè®®ã€‚

### `merge_translations.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼šåˆå¹¶ç¿»è¯‘ã€‚
-   **è¾“å…¥**ï¼š`input/zh.json`, `input/manual_translations.json`
-   **è¾“å‡º** (`output/` ç›®å½•): `zh_translated.json`
-   **ç”¨é€”**ï¼šå°† `manual_translations.json` ä¸­çš„ç¿»è¯‘å†…å®¹å®‰å…¨åœ°åˆå¹¶å›å®Œæ•´çš„ JSON æ–‡ä»¶ç»“æ„ä¸­ï¼Œç”Ÿæˆæœ€ç»ˆçš„ `zh_translated.json`ã€‚

### `generate_pr_message.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼šç”Ÿæˆ PR å’Œ Commit ä¿¡æ¯ã€‚
-   **è¾“å…¥**ï¼š`input/zh.json` (æ—§), `output/zh_translated.json` (æ–°), `input/en.json` (å¯é€‰å‚è€ƒ)
-   **è¾“å‡º** (`output/` ç›®å½•):
    -   `pr_message.md`
    -   `commit_info.txt`
    -   `translation_changes.json`
-   **ç”¨é€”**ï¼šè‡ªåŠ¨åŒ–åˆ›å»ºé«˜è´¨é‡ã€è§„èŒƒçš„æäº¤ä¿¡æ¯ï¼ŒèŠ‚çœæ—¶é—´å¹¶ç¬¦åˆç¤¾åŒºè´¡çŒ®æ ‡å‡†ã€‚

## è´¡çŒ®

æ¬¢è¿é€šè¿‡ Issue æˆ– Pull Request æå‡ºæ”¹è¿›å»ºè®®ï¼Œè®©è¿™ä¸ªå·¥å…·å˜å¾—æ›´å¥½ç”¨ï¼
